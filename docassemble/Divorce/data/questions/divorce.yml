metadata:
  title: Divorce
  short title: Divorce
  comment: This program helps you make the forms to end a marriage or civil union.
  authors:
    - Matt Newsted
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ILAO:ilao-interview-framework.yml
  - docassemble.ILAO:shared-basic-questions.yml
---
objects:
  - users: ALPeopleList.using(there_are_any=True)
  - users[0].employers: ALPeopleList.using(there_are_any=True)
  - other_parties: ALPeopleList.using(there_are_any=True)
  - other_parties[0].employers: ALPeopleList.using(there_are_any=True)
  - children: ALPeopleList.using(object_type=ALIndividual, there_are_any=True, complete_attribute='complete')
  - children[i].former_addresses: DAList.using(there_are_any=True, object_type=ALAddress, complete_attribute=['complete'])   
  - adult_children: ALPeopleList.using(object_type=ALIndividual, there_are_any=True, complete_attribute='complete')
  - outside_children: ALPeopleList.using(object_type=ALIndividual, there_are_any=True, complete_attribute=['complete'])  
  - custody_cases: DAList.using(object_type=Thing, complete_attribute='complete', there_are_any=True)  
  - court_list: ALCourtLoader.using(file_name='docassemble.ILAO:data/sources/il_courts.xlsx')
---
code: |
  al_form_type = 'starts_case'
  ilao_easy_form_title = "Divorce"
  ilao_easy_form_url = "https://www.illinoislegalaid.org/legal-information/divorce"
  form_name = "Divorce"
  github_user = 'IllinoisLegalAidOnline'
  github_repo_name = 'docassemble-Divorce'
  allowed_courts = ['Circuit']
---
# Road map
sections:
  - section_intro: Start
  - section_basic: Basic info
  - section_about_you: About you
  - section_about_spouse: About your spouse
  - section_children: Children (optional)
  - section_debts: Debts
  - section_property: Property
  - section_filing: Filing details
  - section_download: Download  
---
# interview order block
mandatory: True
code: |
  nav.set_section('section_intro')
  sees_nav_bar
  snapshot_start
  how_to_use
  set_progress(5)
  accept_terms
  if users[0].is_resident:
    if users[0].meets_90_day_requirement == False:
      must_meet_90_day_requirement
  else:
    must_live_in_illinois
  case_county

  set_progress(10)  
  nav.set_section('section_basic')
  users[0].name.first
  other_parties[0].name.first
  marriage_date
  marriage_in_america
  previous_divorce
  separation_date
  if divorce_grounds != True:
    must_have_irreconcilable_differences
  
  set_progress(20)
  nav.set_section('section_about_you')
  hide_address
  users[0].address.address
  users[0].residence_county
  users[0].phone_number
  users[0].birthdate
  if users[0].emp_status["Yes"]:
    users[0].employers[0].job_title
    if users[0].has_second_job:
      users[0].employers[1].job_title
  
  users[0].use_former_name
  
  set_progress(30)
  nav.set_section('section_about_spouse')
  if other_parties[0].is_resident:
    other_parties[0].meets_90_day_requirement
  if knows_resp_address:
    other_parties[0].address.address
  other_parties[0].birthdate
  if other_parties[0].emp_status["Yes"]:
    other_parties[0].employers[0].job_title
    if other_parties[0].has_second_job:
      other_parties[0].employers[1].job_title
  other_parties[0].is_active_duty
  
  set_progress(40)
  nav.set_section('section_children')
  children_intro
  pet_is_pregnant
  resp_is_pregnant
  if any_children_together:
    if children_status['minors'] or children_status['support']: 
      children.gather()
    elif children_status['adults'] and children_status['minors'] == False and children_status['support'] == False:
      adult_children.gather()
  if has_other_kids_during_marriage:
    outside_children.gather()
  if other_custody_case:
    custody_cases.gather()
  
  other_case_involving_kids
  
  other_custodian
  
  kids_lived_with_other_adult
  
  set_progress(60)
  nav.set_section('section_debts')

  set_progress(70)
  nav.set_section('section_property')
  
  set_progress(90)
  nav.set_section('section_filing')
  e_signature

  set_progress(100)
  nav.set_section('section_download')
  forms_assembling
  snapshot_forms
  get_docs_screen
---
code: |
  stuff_to_snapshot = {
  	'start_time': str(current_datetime().format_datetime()),
  	'started_interview': True, 
  	}

  try:
    stuff_to_snapshot['ip_address'] = device(ip=True)
  except:
    pass

  stuff_to_snapshot['zip'] = showifdef('users[0].address.zip')

  stuff_to_snapshot['with_kids'] = showifdef('file_with_kids')
  
  stuff_to_snapshot['downloaded_forms'] = showifdef('forms_assembling')
  
  store_variables_snapshot(
  	data=stuff_to_snapshot, persistent=True
  	)
  snapshot_interview_state = True
---
code: |
  snapshot_interview_state
  snapshot_start = True  
---
code: |
  reconsider('snapshot_interview_state')
  snapshot_forms = True
---
id: welcome
question: |
  Divorce
subquestion: |
  Welcome to Illinois Legal Aid Online's **Divorce** Easy Form.

  UPDATE THIS This program helps you ask the court for permission to use an unlicensed process server in your case. It will make a *Motion to Approve Process Server Who is Not Licensed*.

  When you start a lawsuit, the complaint or petition, and a **{summons}**, must be properly delivered to whoever you are suing. To learn more, read ILAO's article about [**serving a summons**](https://www.illinoislegalaid.org/node/147221).
field: sees_nav_bar
---
id: instructions
continue button field: how_to_use
question: |
  Instructions
subquestion: |
  UPDATE THIS To use this program you will need to know: 

  * Your court case information, 
  * Name and address of the person you want to be a process server,
  * Why you want to use an unlicensed process server,
  * Names and addresses of the other parties, and 
  * Names and addresses of the other parties’ lawyers, if any. 

  You can find most of this information on other court papers you have about this case. 

  Set aside 10 to 15 minutes to finish this program. You can log in and save your work to continue later. 
 
  ${ collapse_template(help_example) }  

  Click on **{green words}** to learn what they mean. Some pages have a question mark in a circle ${ fa_icon("question-circle", color_css="#0dcaf0" ) } that helps explain things.
---
template: help_example
subject: |
  **You can click sections like this to show more information.**
content: |  
  This is an example of help. Click again to hide.
---
id: live in IL
question: |
  Do you live in Illinois?
fields:
  - no label: users[0].is_resident
    datatype: yesnoradio  
---
id: must live in IL
event: must_live_in_illinois
question: |
  Sorry
subquestion: |
  You must live in Illinois if you want to file for divorce in Illinois.
  
  You can use the [**Legal Services Corporation website**](https://www.lsc.gov/about-lsc/what-legal-aid/get-legal-help) to find a legal aid organization in another state.
buttons:
  - Exit: exit
  - Restart: restart
---
id: live in IL for 90 days
question: |
  Have you lived in Illinois for longer than 90 days?
#subquestion: |
#  Answering **Yes** means that you lived in Illinois without taking a break to live in another state.
fields:
  - no label: users[0].meets_90_day_requirement
    datatype: yesnoradio
---
id: must meet 90 day requirement
event: must_meet_90_day_requirement
question: |
  Sorry
subquestion: |
  You must live in Illinois for longer than 90 days if you want to file for divorce in Illinois.
  
  You can use the [**Legal Services Corporation website**](https://www.lsc.gov/about-lsc/what-legal-aid/get-legal-help) to find a legal aid organization in another state.
buttons:
  - Exit: exit
  - Restart: restart
---
id: case county
question: |
  Where do you want to file your divorce?
subquestion: |
  **Note:** You must file the divorce in the county where you or your spouse lives.

  ${ collapse_template(county_lookup_help) }
fields:
  - County: case_county
    code:
      court_list._load_courts()["address_county"].unique()

---
id: user name
sets:
    - users[0].name.first
    - users[0].name.last
    - users[0].name.middle
    - users[0].name.suffix
question:  |
  What is your name?
fields:
  - code: |
      users[0].name_fields()
---
sets:
  - other_parties[0].name.first
  - other_parties[0].name.last
  - other_parties[0].name.middle
  - other_parties[0].name.suffix
id: spouse name
question: |
  What is the name of your spouse?
subquestion: |
  The word "spouse" refers to your husband, wife, or domestic partner.
fields:
  - code: |
      other_parties[0].name_fields()
---
id: marriage date
question: |
  When were you married?
subquestion: |
  If you are ending a civil union, enter the date you were united.
fields:
  - Date of marriage or civil union: marriage_date
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: marriage location
question: |
  Where were you married?
subquestion: |
  If you are ending a civil union, enter the location where the civil union occurred.
fields:
  - Were you married or united in the United States?: marriage_in_america
    datatype: yesnoradio
  - County: marriage_county
    show if: 
      variable: marriage_in_america
      is: True
  - State: marriage_state
    show if: 
      variable: marriage_in_america
      is: True
    code: |
      states_list() 
  - County and State or Province (separated by a comma): marriage_intl_text
    help: |
      List the county and list the state or province if the country has them.
    required: False
    show if: 
      variable: marriage_in_america
      is: False
  - Country (outside US): marriage_country
    show if: 
      variable: marriage_in_america
      is: False   
---
id: previous divorce filed
question: |
  Have you or your spouse filed an earlier case to dissolve this marriage or civil union?
fields:
  - Filed an earlier divorce?: previous_divorce
    datatype: radio
    choices:
      - Yes: Yes
      - No: No
      - I don't know.: I don't know.
  - Was it filed in the United States?: previous_divorce_in_us
    datatype: yesnoradio
    show if: 
      variable: previous_divorce
      is: "Yes"
  - County: previous_divorce_county
    show if: 
      variable: previous_divorce_in_us
      is: True
  - State: previous_divorce_state
    show if: 
      variable: previous_divorce_in_us
      is: True
    code: |
      states_list() 
  - Country (outside US): previous_divorce_country
    show if: 
      variable: previous_divorce_in_us
      is: False   
---
id: separation date
question: |
  When did you separate or start living apart?
subquestion: |
  You do not need to live at separate addresses to be "separated."
fields:
  - Separation date: separation_date
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
    alMin: ${ marriage_date.format("yyyy-MM-dd")}    
---
id: divorce grounds
question: |
  Have irreconcilable differences caused the irretrievalble breakdown of the marriage or civil union?
subquestion: |
  Select **Yes** if:
  
  * You and your spouse have tried to fix the problems in your marriage or civil union, but could not, or
  * The problems are so bad that trying to fix them is not best for your family.
fields:
  - no label: divorce_grounds
    datatype: yesnoradio  
---
id: must be irreconcilable differences
event: must_have_irreconcilable_differences
question: |
  Sorry
subquestion: |
  To use this program, you and your spouse or partner must have irreconcilable differences that led to the irretrievable breakdown of the marriage or civil union.

  This means that you and your spouse have tried to fix the problems in your marriage or civil union, but could not. Or it could be that the problems are so bad that trying to fix them is not best for your family.
  
   Click **Back** if you made a mistake. Or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart  


---
id: hide address
question: |
  Do you want to keep your address hidden?
subquestion: |
  You do not need to list where you are staying on your court papers. You can use an address where you can receive court notices instead.
field: hide_address
choices:
  - Yes: True
  - No: False
---
id: get user address
question: |
  % if hide_address:
  What is your mailing address?
  % else:
  What is your home address?
  % endif
subquestion: |
  % if hide_address:
  **This address will appear on your court papers.** You may receive court notices and documents about your case at this address.
  % else:
  **This address will appear on your court papers.** If you do not want this, click **Back** to keep your address hidden.
  % endif
fields:
  - Street address: users[0].address.address
    address autocomplete: True
  - Address line 2: users[0].address.unit
    required: False
  - City: users[0].address.city
  - State: users[0].address.state
    code: |
      states_list()
    default: IL      
  - ZIP code: users[0].address.zip
---
id: user residence county
question: |
  In which county do you live?
subquestion: |
  **Reminder:** You must file the divorce in the county where you or your spouse lives.

  ${ collapse_template(county_lookup_help) }
fields:
  - County: users[0].residence_county
    code:
      court_list._load_courts()["address_county"].unique()

---
id: your contact information
question: |
  What is your contact information?
subquestion: |
  The court or other parties might need to contact you about this case.

  **This information will appear on your court forms.**
  
  If you do not want to list a phone number on your forms, leave it blank.

  If you have an email address, you must list it. Be sure to check your email daily, otherwise you may miss important court documents or information about your case.

  ${ collapse_template(contact_info_help) }  
fields:  
  - Phone number: users[0].phone_number
    datatype: al_international_phone
    required: False
  - label: |
      Do you have an email address?
    field: users[0].has_email_address      
    datatype: yesnoradio
  - note: |
      This email address will appear on your court forms. Be sure to check 
      this email daily, otherwise you may miss important information about 
      your case.
    show if:
      variable: users[0].has_email_address
      is: True
  - Email address: users[0].email    
    datatype: email
    show if: 
      variable: users[0].has_email_address
      is: True
---
template: contact_info_help
subject: |
  **What if I don't want to list my email address?**
content: |  
  If you do not want to enter your personal email address, you can create a new email account to get email about your case.
  
  To make a new email account try one of these email services:
  
  * [**Gmail**](https://accounts.google.com/SignUp)
  * [**Outlook**](https://outlook.live.com/owa/?nlp=1&signup=1)
  * [**Yahoo**](https://login.yahoo.com/account/create?.lang=en-US&.intl=us)
---
id: birthdate
question: |
  When were you born?
fields:
  - Date of birth: users[0].birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: employment status
question: |
  Are you currently employed?
subquestion: |
  Check all that apply.
fields:
  - no label: users[0].emp_status
    datatype: checkboxes
    choices:
      - Yes: Yes
      - No: No
      - I receive Social Security, unemployment or other types of benefits.: ss
    none of the above: False
validation code: |
  if users[0].emp_status['Yes'] and users[0].emp_status['No']:
    validation_error("You cannot select both 'Yes' and 'No.' Please adjust your answers.", field="users[0].emp_status")
---
id: employer info
question: |
  % if j == 0:
  Tell us about your job
  % else:
  Tell us about your second job
  % endif
fields:
  - Job title: users[i].employers[j].job_title
    maxlength: 40    
  - Employer's name: users[i].employers[j].name.text
    maxlength: 40
  - Street address: users[i].employers[j].address.address
    address autocomplete: True
  - Address line 2: users[i].employers[j].address.unit
    required: False
  - City: users[i].employers[j].address.city
  - State: users[i].employers[j].address.state
    code: |
      states_list()
    default: IL
  - ZIP code: users[i].employers[j].address.zip
  - Phone number: users[i].employers[j].phone_number
    datatype: al_international_phone
    required: False
---
id: second job question
question: |
  Do you have another job?
subquestion: |
  So far you told us about your job as ${ users[0].employers[0].job_title } for this employer: ${users[0].employers[0].name.text }.
fields: 
  no label: users[0].has_second_job
  datatype: yesnoradio
---
sets:
  - users[0].aliases[0].first
  - users[0].aliases[0].last
  - users[0].aliases[0].middle
  - users[0].aliases[0].suffix
id: user former name
question: |
  Do you want to go back to a former or maiden name?
fields:
  - no label: users[0].use_former_name
    datatype: yesnoradio
  - note: |
      Enter your former or maiden name.
    show if:
      variable: users[0].use_former_name
      is: True
  - First name: users[0].aliases[0].first
    show if:
      variable: users[0].use_former_name
      is: True
  - Middle name: users[0].aliases[0].middle
    required: False
    show if:
      variable: users[0].use_former_name
      is: True
  - Last name: users[0].aliases[0].last
    show if:
      variable: users[0].use_former_name
      is: True
  - Suffix: users[0].aliases[0].suffix
    code: |
      name_suffix()
    required: False
    show if:
      variable: users[0].use_former_name
      is: True
---
id: spouse birthdate
question: |
  When was ${other_parties[0].name.full(middle="full")} born?
fields:
  - Date of birth: other_parties[0].birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: spouse lives in IL
question: |
  Does ${other_parties[0].name.full(middle="full")} live in Illinois?
fields:
  - no label: other_parties[0].is_resident
    datatype: yesnoradio  
---
id: spouse lives in IL for 90 days
question: |
  Has ${other_parties[0].name.full(middle="full")} lived in Illinois for longer than 90 days?
fields:
  - no label: other_parties[0].meets_90_day_requirement
    datatype: yesnoradio
---
id: know spouse address
question: |
  Do you know ${other_parties[0].name.full(middle="full")}'s current address?
fields:
  - no label: knows_resp_address
    datatype: yesnoradio
---
id: get spouse address
question: |
  What is ${other_parties[0].name.full(middle="full")}'s current address?
fields:
  - Street address: other_parties[0].address.address
    address autocomplete: True
  - Address line 2: other_parties[0].address.unit
    required: False
  - City: other_parties[0].address.city
  - State: other_parties[0].address.state
    code: |
      states_list()
    default: IL      
  - ZIP code: other_parties[0].address.zip
---
id: spouse employment status
question: |
  Is ${other_parties[0].name.full(middle="full")} currently employed?
subquestion: |
  Check all that apply.
fields:
  - no label: other_parties[0].emp_status
    datatype: checkboxes
    choices:
      - Yes: Yes
      - No: No
      - They receive Social Security, unemployment or other types of benefits.: ss
      - I don't know.: idk
    none of the above: False
validation code: |
  if other_parties[0].emp_status['Yes'] and other_parties[0].emp_status['No']:
    validation_error("You cannot select both 'Yes' and 'No.' Please adjust your answers.", field="other_parties[0].emp_status")
  elif (other_parties[0].emp_status['Yes'] or other_parties[0].emp_status['No']) and other_parties[0].emp_status['idk']:
    validation_error("You cannot select both 'I don't know' and 'Yes' or 'No.' Please adjust your answers.", field="other_parties[0].emp_status")
---
id: spouse employer info
question: |
  % if j == 0:
  Tell us about ${other_parties[0].name.full(middle="full")}'s job
  % else:
  Tell us about ${other_parties[0].name.full(middle="full")}'s second job
  % endif
fields:
  - Job title: other_parties[i].employers[j].job_title
    maxlength: 40
  - Employer's name: other_parties[i].employers[j].name.text
    maxlength: 40
  - Street address: other_parties[i].employers[j].address.address
    address autocomplete: True
  - Address line 2: other_parties[i].employers[j].address.unit
    required: False
  - City: other_parties[i].employers[j].address.city
  - State: other_parties[i].employers[j].address.state
    code: |
      states_list()
    default: IL
  - ZIP code: other_parties[i].employers[j].address.zip
  - Phone number: other_parties[i].employers[j].phone_number
    datatype: al_international_phone
    required: False
---
id: spouse second job question
question: |
  Does ${other_parties[0].name.full(middle="full")} have another job?
subquestion: |
  So far you told us about ${other_parties[0].name.full(middle="full")}'s job as ${ other_parties[0].employers[0].job_title } for this employer: ${other_parties[0].employers[0].name.text }.
fields: 
  no label: other_parties[0].has_second_job
  datatype: yesnoradio
---
id: spouse active duty
question: |
  Is ${other_parties[0].name.full(middle="full")} currently on active duty as a member of the Armed Forces of the United States of America?
fields:
  - no label: other_parties[0].is_active_duty
    datatype: radio
    choices:
      - Yes: Yes
      - No: No
      - I don't know.: idk
---
id: children intro
continue button field: children_intro
question: |
  Questions about children
subquestion: |
  The next screens will ask you about pregnancy and children. Based on your answers, the program will make the correct forms.

  **Note:** Even if you don't have any children together, the "Divorce with children" forms may be created. These will work better if you or your spouse are pregnant.
---
id: petitioner pregnant
question: |
  Pregnancy
fields:
  - Are you currently pregnant?: pet_is_pregnant
    datatype: yesnoradio
  - Is ${other_parties[0].name.full(middle="full")} the other parent of the unborn child?: pet_pregnant_resp_parent
    datatype: radio
    choices:
      - Yes: Yes
      - No: No
      - I don't know.: I don't know
    show if:
      variable: pet_is_pregnant
      is: True
---
id: respondent pregnant
question: |
  ${other_parties[0].name.full(middle="full")}'s pregnancy
fields:
  - Is ${other_parties[0].name.full(middle="full")} currently pregnant?: resp_is_pregnant
    datatype: radio
    choices:
      - Yes: Yes
      - No: No
      - I don't know.: I don't know
  - Are you the other parent of the unborn child?: resp_pregnant_pet_parent
    datatype: radio
    choices:
      - Yes: Yes
      - No: No
      - I don't know.: I don't know
    show if: 
      variable: resp_is_pregnant
      is: "Yes"
---
id: any children together
question: |
  Do you and ${other_parties[0].name.full(middle="full")} have any children together?
subquestion: |
  These can be children born to or adopted by you and ${other_parties[0].name.full(middle="full")}.

  These can also be adult children.
fields:
  - no label: any_children_together
    datatype: yesnoradio
---
id: children information
question: |
  Information about your children
subquestion: |
  The court needs information about children of the marriage.

  **Note:** If you have both minor children and adult children, you do not need to include information about your adult children unless they are still in school or have a disability.
  
  Check all that apply.
fields:
  - We gave birth to or adopted children who are: children_status
    datatype: checkboxes
    choices:
      - Younger than 18.: minors
      - 18 or older but are still in school or have a disability.: support
      - Adults who do not need support to attend school or because of a disability.: adults
    none of the above: False
validation code: |
  if children_status.all_false():
    validation_error("You must select one option. If you made a mistake, click < Back.", field="children_status")
---
code: |
  children[i].name.first
  children[i].birthdate
  children[i].is_of_marriage
  children[i].has_a_disability
  children[i].is_in_school
  if children[i].age_in_years() < 18:
    children[i].is_resident
    children[i].address.address
    if children[i].has_former_address:
      children[i].former_addresses.gather()
  children[i].complete = True
---
code: |
  children[i].former_addresses[j].address
  children[i].former_addresses[j].complete = True
---
code: |
  if children.number_gathered() >= 7:
    children.there_is_another = False
---
code: |
  if children[i].former_addresses.number_gathered() >= 4:
    children[i].former_addresses.there_is_another = False
---
code: |
  adult_children[i].name.first
  adult_children[i].birthdate
  adult_children[i].complete = True
---
sets:
  - children[0].name.first
  - children[0].name.middle
  - children[0].name.last
  - children[0].name.suffix
id: name of first child with respondent
question: |
  Who is your child with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  You only need to include children that you and your spouse gave birth to or adopted who are:
  
  * Younger than 18, or
  * 18 or older but are still in school or have a disability.
fields:
  - code: |
      children[0].name_fields()
---
id: names of other children with respondent
sets:
  - children[i].name.first
  - children[i].name.middle
  - children[i].name.last
  - children[i].name.suffix
question: |
  Who is your ${ ordinal(i) } child with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  You only need to include children that you and your spouse gave birth to or adopted who are:
  
  * Younger than 18, or
  * 18 or older but are still in school or have a disability.
fields:
  - code: |
      children[i].name_fields()
---
id: any other children with respondent
question: |
  Do you have another child with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  So far you have told us about ${comma_and_list(children.complete_elements().full_names())}.

  The divorce forms have room for up to seven children. You only need to include children that you and your spouse gave birth to or adopted who are:
  
  * Younger than 18, or
  * 18 or older but are still in school or have a disability.
fields:
  - "Anyone else?": children.there_is_another
    datatype: yesnoradio
---
id: child age
question: |
  When was ${children[i].name.full(middle="full")} born?
fields:
  - Birth date: children[i].birthdate
    datatype: ThreePartsDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: is child of marriage
question: |
  Was ${children[i].name.full(middle="full")} born or adopted after the marriage?
subquestion: |
  If the child was born before the marriage, but adoped after the marriage, select **Yes**.
fields:
  - no label: children[i].is_of_marriage
    datatype: yesnoradio
---
id: does child have a disability
question: |
  Does ${children[i].name.full(middle="full")} have a disability?
fields:
  - no label: children[i].has_a_disability
    datatype: yesnoradio
---
id: is child in school
question: |
  Is ${children[i].name.full(middle="full")} in school?
fields:
  - no label: children[i].is_in_school
    datatype: yesnoradio
---
id: child address
question: |
  Has ${children[i].name.full(middle="full")} lived in Illinois for the last 6 months or more?
fields:
  - Illinois resident for 6 months or more?: children[i].is_resident
    datatype: radio
    choices:
      - Yes: Yes
      - No: No
      - I don't know.: I don't know
---
id: child address
question: |
  What is ${children[i].name.full(middle="full")}'s current address?
subquestion: |
  **This address will appear on your court papers.** 
fields:
  - Street address: children[i].address.address
    address autocomplete: True
  - Address line 2: children[i].address.unit
    required: False
  - City: children[i].address.city
  - State: children[i].address.state
    code: |
      states_list()
    default: IL      
  - ZIP code: children[i].address.zip
---
id: does child have former address
question: |
  Has ${children[i].name.full(middle="full")} lived at any other addresses in the last five years?
fields:
  - no label: children[i].has_former_address
    datatype: yesnoradio
---
id: child former address detail
question: |
  Tell us about ${children[i].name.full(middle="full")}'s ${ ordinal(i) } former address
subquestion: |
  You only need to include addresses where they lived in the past five years.

    **This address will appear on your court papers.** 
fields:
  - Street address: children[i].former_addresses[j].address
    address autocomplete: True
  - Address line 2: children[i].former_addresses[j].unit
    required: False
  - City: children[i].former_addresses[j].city
  - State: children[i].former_addresses[j].state
    code: |
      states_list()
    default: IL      
  - ZIP code: children[i].former_addresses[j].zip
---
id: more former addresses
question: |
  Does ${children[i].name.full(middle="full")} have any other addresses from the past five years?
subquestion: |
  The court forms have space for up to four former addresses.
  
  So far you told us about:

  % for former_address in children[i].former_addresses:
    * ${ former_address.on_one_line(bare=True) }
  % endfor
fields:
  - no label: children[i].former_addresses.there_is_another
    datatype: yesnoradio
---
code: |
  if children[i].former_addresses.number_gathered() >= 4:
    children[i].former_addresses.there_is_another = False
  
---
sets:
  - adult_children[0].name.first
  - adult_children[0].name.middle
  - adult_children[0].name.last
  - adult_children[0].name.suffix
id: name of first adult child with respondent
question: |
  Who is your adult child with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  You only need to include adult children that you and your spouse gave birth to or adopted who are adults. These are adult children who do not need support to attend school or because of a disability.
fields:
  - code: |
      adult_children[0].name_fields()
---
id: names of other adult children with respondent
sets:
  - adult_children[i].name.first
  - adult_children[i].name.middle
  - adult_children[i].name.last
  - adult_children[i].name.suffix
question: |
  Who is your ${ ordinal(i) } adult child with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  You only need to include adult children that you and your spouse gave birth to or adopted who are adults. These are adult children who do not need support to attend school or because of a disability.
fields:
  - code: |
      adult_children[i].name_fields()
---
id: any other adult children with respondent
question: |
  Do you have another adult child with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  So far you have told us about ${comma_and_list(adult_children.complete_elements().full_names())}.

  You only need to include adult children that you and your spouse gave birth to or adopted who are adults. These are adult children who do not need support to attend school or because of a disability.
fields:
  - "Anyone else?": adult_children.there_is_another
    datatype: yesnoradio
---
id: adult child age
question: |
  When was ${adult_children[i].name.full(middle="full")} born?
fields:
  - Birth date: adult_children[i].birthdate
    datatype: ThreePartsDate
    alMax: ${ (current_datetime() - date_interval(years=18)).format("yyyy-MM-dd") }
---
id: has other kids during marriage
question: |
  Did you or ${other_parties[0].name.full(middle="full")} have a child by birth or adoption with someone else since the date of marriage?
fields:
  - no label: has_other_kids_during_marriage
    datatype: yesnoradio

---
code: |
  outside_children[i].name.first
  outside_children[i].complete = True
---
code: |
  if outside_children.number_gathered() >= 4:
    outside_children.there_is_another = False
---
sets:
  - outside_children[0].name.first
  - outside_children[0].name.middle
  - outside_children[0].name.last
  - outside_children[0].name.suffix
id: info about first child born or adopted outside marriage
question: |
  Information about child born or adopted outside of marriage
subquestion: |
  You only need to include children that you or ${other_parties[0].name.full(middle="full")} have had by birth or adoption with someone else since the date of marriage.
fields:
  - code: |
      outside_children[0].name_fields()
  - Who's child is this?: outside_children[0].parent
    datatype: radio    
    choices:
      - My child: "My child"
      - ${other_parties[0].name.full(middle="full")}'s child: "My spouse's child"
---
id: info about other children born or adopted outside marriage
sets:
  - outside_children[i].name.first
  - outside_children[i].name.middle
  - outside_children[i].name.last
  - outside_children[i].name.suffix
question: |
  Information about a ${ ordinal(i) } child born or adopted outside of marriage
subquestion: |
  You only need to include children that you or ${other_parties[0].name.full(middle="full")} have had by birth or adoption with someone else since the date of marriage.
fields:
  - code: |
      outside_children[i].name_fields()
  - Who's child is this?: outside_children[i].parent
    datatype: radio    
    choices:
      - My child: "My child"
      - ${other_parties[0].name.full(middle="full")}'s child: "My spouse's child"
---
id: any other children outside marriage
question: |
  Did you or ${other_parties[0].name.full(middle="full")} have another child by birth or adoption with someone else since the date of marriage?
subquestion: |
  So far you have told us about ${comma_and_list(outside_children.complete_elements().full_names())}.

  The divorce forms have room for up to four children. You only need to include children that you or ${other_parties[0].name.full(middle="full")} have had by birth or adoption with someone else since the date of marriage.
fields:
  - "Anyone else?": outside_children.there_is_another
    datatype: yesnoradio

---
id: involvement in other court case about children
question: |
  Have you been involved in another court case about custody or visitation with any of the children you have with ${other_parties[0].name.full(middle="full")}?
fields:
  - no label: other_custody_case
    datatype: yesnoradio

---
code: |
  custody_cases[i].name.text
  custody_cases[i].county
  custody_cases[i].state
  custody_cases[i].kids_involved
  custody_cases[i].final_order
  custody_cases[i].complete = True
---
code: |
  if custody_cases.number_gathered() >= 3:
    custody_cases.there_is_another = False
---
id: info about first custody case
question: |
  Information about another custody or visitation case
subquestion: |
  You only need to include custody or visitation cases that involve one or more children you have with ${other_parties[0].name.full(middle="full")}.

  This information should be found on the court papers from the other case.
fields:
  - Case number: custody_cases[0].name.text
    maxlength: 25
  - County where case filed: custody_cases[0].county
    maxlength: 25
  - State where case filed: custody_cases[0].state
    code: |
      states_list() 
  - Names of children involved in the case: custody_cases[0].kids_involved
    maxlength: 45
    help: |
      If more than one child, separate names by commas.
  - Has a final order been entered in the case?: custody_cases[0].final_order
    datatype: yesnoradio
  - Date of final order: custody_cases[0].final_order_date
    datatype: ThreePartsDate
    alMax: ${ today().format("yyyy-MM-dd") }
    show if:
      variable: custody_cases[0].final_order
      is: True
---
id: info about other custody cases
question: |
  Information about a ${ ordinal(i) } custody or visitation case
subquestion: |
  You only need to include custody or visitation cases that involve one or more children you have with ${other_parties[0].name.full(middle="full")}.

  This information should be found on the court papers from the other case.  
fields:
  - Case number: custody_cases[i].name.text
    maxlength: 25
  - County where case filed: custody_cases[i].county
    maxlength: 25
  - State where case filed: custody_cases[i].state
    code: |
      states_list() 
  - Names of children involved in the case: custody_cases[i].kids_involved
    maxlength: 45
    help: |
      If more than one child, separate names by commas.
  - Has a final order been entered in the case?: custody_cases[i].final_order
    datatype: yesnoradio
  - Date of final order: custody_cases[i].final_order_date
    datatype: ThreePartsDate
    alMax: ${ today().format("yyyy-MM-dd") }
    show if:
      variable: custody_cases[i].final_order
      is: True
---
id: any other custody cases
question: |
  Have you been involved in any other court cases about custody or visitation with any of the children you have with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  So far you have told us about:

  % for case in custody_cases:
  * Case number: ${case.name.text} in ${case.county}, ${case.state}
  % endfor  

  The divorce forms have room for up to three cases. You only need to include custody or visitation cases that involve one or more children you have with ${other_parties[0].name.full(middle="full")}.
fields:
  - "Any other cases?": custody_cases.there_is_another
    datatype: yesnoradio



---
id: another court case that impacts children
question: |
  Do you know of another court case, not custody or visitation, that might affect any of the children you have with ${other_parties[0].name.full(middle="full")}?
fields:
  - no label: other_case_involving_kids
    datatype: yesnoradio


---
id: another custodian
question: |
  Do you know of another person who has custody or rights to any of the children you have with ${other_parties[0].name.full(middle="full")}?
subquestion: |
  This person could have:

  * Physical custody of one or more of your children, or
  * Rights to legal custody, physical custody, or visitation with your children.
fields:
  - no label: other_custodian
    datatype: yesnoradio



---
id: children lived with another adult in last 5 years
question: |
  Have any of your children with ${other_parties[0].name.full(middle="full")} lived with another adult without either parent in the last 5 years?
fields:
  - no label: kids_lived_with_other_adult
    datatype: yesnoradio





---
reconsider: True
code: |
  file_with_kids = False
  if pet_is_pregnant:
    if pet_pregnant_resp_parent != "No":
      file_with_kids = True
  if resp_is_pregnant == "Yes":
    if resp_pregnant_pet_parent != "No":
      file_with_kids = True
  # this will need work  
  if any_children_together:
    file_with_kids = True
# this will need to be updated!
# maybe just have this logic in the assembly.enabled block instead - fewer vars to worry about





---
id: e-signature
question: |
  Do you want to add your e-signature to your ${ form_name }?
subquestion: |
  This program can put “**/s/ ${users[0].name.full(middle='full')}**” where you would sign your name. The court will accept this as your signature.

  If you do not add your **{e-signature}** now, you must sign your paper forms before you file and deliver them.

  <div class="alert alert-info ilao-info" role="alert">
    <h6 class="alert-heading">What it means to sign your forms</h6>
    <p>By signing your <i>Motion to Approve Process Server Who is Not Licensed</i>, you are certifying that:</p>
    <p><ul>
      <li>Everything on the forms is true and correct, and</li>
      <li>You understand that making a false statement on the form is perjury, which can result in criminal penalties.</li>
    </ul></p>
  <p>See the <a href="https://www.ilga.gov/legislation/ilcs/documents/073500050k1-109.htm"><b>Code of Civil Procedure, 735 ILCS 5/1-109</b></a> for more information.</p>
    <p>By signing your <i>Notice of Court Date for Motion</i> (if needed), you are certifying that:</p>
    <p><ul>
      <li>You read the document,</li>
      <li>You believe it to be true and correct, and</li>
      <li>You are not filing it for an improper purpose.</li>
    </ul></p>
    <p>See the <a href="https://ilcourtsaudio.blob.core.windows.net/antilles-resources/resources/9ce1fce9-895f-463e-b87d-f9b7631f8fde/Rule%20137.pdf"><b>Illinois Supreme Court Rule 137</b></a> for more information.</p>
  </div>
fields:
  - "Add e-signature?": e_signature
    datatype: yesnoradio
terms:
  - "e-signature": |
      An e-signature is an electronic signature. It is a digital version of a signature that has the same effect as a hand-written signature. 
---
id: forms assembling
continue button field: forms_assembling
question: |
  Almost done
subquestion: |
  After you click **Next**, it may take a few moments to finish making your forms.
  
  ###### You do not need to refresh your screen. Hang in there!
  
  [NEWLINE]
---
id: get docs screen
event: get_docs_screen
question: |
  Download
subquestion: |
  
  Your forms are ready. View and download your forms below. Click **Make changes** to fix any mistakes.
 
  This program **does not file** your divorce forms. You will need to do this yourself. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).

  ${ action_button_html(url_action('review_answers'), label=':edit: Make changes', color='success', size="md") }
  
  ${ al_user_bundle.download_list_html() }

  [NEWLINE]

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

  **Note:** This program **does not file** your forms. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).
  
  Thank you for using ILAO Easy Forms!
under: |
  % if not user_logged_in():
  [${fa_icon("sign-in-alt", color="#0079d0", size="sm")} **Sign-in**](${url_of('login', next=interview_url())}) or [**create**](${url_of('register', next=interview_url())}) an ILAO Easy Form account to save your progress (optional).
  % endif 

  &nbsp;
  ${ action_button_html(interview_url(i="docassemble.ILAO:feedback.yml", easy_form_interview=ilao_easy_form_url, easy_form_title=ilao_easy_form_title, easy_form_page=current_context().question_id, easy_form_variable=current_context().variable, local=False,reset=1), label=':comment: Was this program helpful?', color="#181c36", size="md", new_window=True) }
---
generic object: ALDocumentBundle
template: x.get_email_copy
content: |
  Send a copy of your forms to your email
---
generic object: ALDocumentBundle
template: x.send_email_template
subject: |
  Divorce forms
content: |
  Your forms are attached.
  
  Thanks for using ILAO Easy Forms!
  
  [Illinois Legal Aid Online](https://www.illinoislegalaid.org)

---
objects:
  - instructions_kids: ALDocument.using(title="Instructions", filename="instructions.pdf", has_addendum=False)
---
code: |
  instructions_kids.enabled = True
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[instructions_kids], filename="divorce_forms.pdf", title="All forms")
  - al_court_bundle: ALDocumentBundle.using(elements=[instructions_kids], filename="divorce_forms.pdf", title="All forms")
---
attachment:
  variable name: instructions_kids[i]
  name: instructions_kids
  filename: instructions-kids
  editable: False
  skip undefined: True
  pdf template file: instructions_kids.pdf  
  fields:
      - "fake": ${ "" }
---
############### Review page
id: review screen
event: review_answers
question: |
  Review screen
subquestion: |
  Edit your answers below.
review: 
  - note: |
      <h4>Basic info</h4>
  - Edit:
    - marriage_date
    button: |
      **Marriage or civil union date:**
      ${ marriage_date }
  - Edit:
    - marriage_in_america
    button: |
      **Place of marriage or civil union:**
      % if marriage_in_america:
      ${ marriage_county }, ${ marriage_state }, US
      % else:
      % if marriage_intl_text != "":
      ${ marriage_intl_text}, ${marriage_country}
      % else:
      ${marriage_country} 
      % endif      
      % endif
  - Edit:
    - previous_divorce
    button: |
      **Did you or your spouse file an earlier case to dissolve the marriage or civil union?**
      ${ previous_divorce }
  - Edit:
    - previous_divorce
    button: |
      **Case filed in:**
      % if previous_divorce_in_us:
      ${ previous_divorce_county }, ${ previous_divorce_state }
      % else:
      ${previous_divorce_country}
      % endif      
    show if: previous_divorce == "Yes"
  - Edit: separation_date
    button: |
      **When did you separate?**
      ${ separation_date }
  - Edit:
    - divorce_grounds
    button: |
      **Reason to end marriage or civil union:**
      Irreconcilable differences

  
  - note: |
      <h4>About you</h4>
  - Edit: users[0].name.first
    button: |
      **Your name:**
      ${users[0].name.full(middle="full")}
  - Edit: hide_address
    button: |
      **Do you want to keep your address hidden?**
      ${ word(yesno(hide_address)) }
  - Edit: users[0].address.address
    button: |
      % if hide_address:
      **Your mailing address (will appear on your court papers):**
      % else:
      **Your home address:**
      % endif    
      ${ users[0].address.on_one_line(bare=True) }
  - Edit: users[0].residence_county
    button: |
      **County where you live:**
      ${ users[0].residence_county }
  - Edit: users[0].phone_number
    button: |
      **Your phone number:**
      ${ phone_number_formatted(users[0].phone_number) }
  - Edit: users[0].has_email_address
    button: |
      **Do you have an email address?**
      ${ word(yesno(users[0].has_email_address)) }
  - Edit: users[0].email
    button: |
      **Your email:**
      ${ users[0].email }
    show if: users[0].has_email_address
  - Edit: users[0].birthdate
    button: |
      **When were you born?**
      ${ users[0].birthdate }
  - Edit: users[0].emp_status
    button: |
      **Are you employed?**

      % if users[0].emp_status['Yes']:
      * Yes
      % endif
      % if users[0].emp_status['No']:
      * No
      % endif
      % if users[0].emp_status['ss']:
      * I receive Social Security, unemployment or other types of benefits.
      % endif
  - Edit: users[0].employers[0].job_title
    button: |
     **Job title:**
      ${ users[0].employers[0].job_title }
    show if: users[0].emp_status["Yes"]
  - Edit: users[0].employers[0].name.text
    button: |
      **Employer name:**
      ${ users[0].employers[0].name.text }
    show if: users[0].emp_status["Yes"]
  - Edit: users[0].employers[0].address.address
    button: |
      **Employer address:**
      ${ users[0].employers[0].address.on_one_line(bare=True) }
    show if: users[0].emp_status["Yes"]
  - Edit: users[0].employers[0].phone_number
    button: |
      **Employer phone:**
      % if users[0].employers[0].phone_number != "":
      ${ phone_number_formatted(users[0].employers[0].phone_number) }
      % else:
      None entered
      % endif
    show if: users[0].emp_status["Yes"]
  - Edit: users[0].has_second_job
    button: |
      **Do you have a second job?**
      ${word(yesno(users[0].has_second_job))}
    show if: users[0].emp_status["Yes"] == True
  - Edit: users[0].employers[1].job_title
    button: |
     **Second job title:**
      ${ users[0].employers[1].job_title }
    show if: users[0].emp_status["Yes"] == True and users[0].has_second_job
  - Edit: users[0].employers[1].name.text
    button: |
      **Second employer name:**
      ${ users[0].employers[1].name.text }
    show if: users[0].emp_status["Yes"] == True and users[0].has_second_job
  - Edit: users[0].employers[1].address.address
    button: |
      **Second employer address:**
      ${ users[0].employers[1].address.on_one_line(bare=True) }
    show if: users[0].emp_status["Yes"] == True and users[0].has_second_job
  - Edit: users[0].employers[1].phone_number
    button: |
      **Second employer phone:**
      % if users[0].employers[1].phone_number != "":
      ${ phone_number_formatted(users[0].employers[1].phone_number) }
      % else:
      None entered
      % endif
    show if: users[0].emp_status["Yes"] == True and users[0].has_second_job
  - Edit: users[0].use_former_name
    button: |
      **Do you want to go back to a former or maiden name?**
      ${word(yesno(users[0].use_former_name))}
  - Edit: users[0].use_former_name
    button: |
      **Former or maiden name:**
      ${ users[0].aliases[0].full(middle="full")}
    show if: users[0].use_former_name
      
  - note: |
      <h4>About your spouse</h4>
  - Edit: other_parties[0].name.first
    button: |
      **Your spouse's name:**
      ${other_parties[0].name.full(middle="full")}
  - Edit: other_parties[0].birthdate
    button: |
      **When was ${other_parties[0].name.full(middle="full")} spouse born?**
      ${ other_parties[0].birthdate }
  - Edit: other_parties[0].is_resident
    button: |
      **Does ${other_parties[0].name.full(middle="full")} live in Illinois?**
      ${ word(yesno(other_parties[0].is_resident)) }
  - Edit: other_parties[0].meets_90_day_requirement
    button: |
      **Has ${other_parties[0].name.full(middle="full")} lived in Illinois for longer than 90 days?**
      ${ word(yesno(other_parties[0].meets_90_day_requirement)) }
  - Edit: knows_resp_address
    button: |
      **Do you know ${other_parties[0].name.full(middle="full")}'s current address?**
      ${ word(yesno(knows_resp_address)) }
  - Edit: other_parties[0].address.address
    button: |
      **${other_parties[0].name.full(middle="full")}'s current address:**
      ${ other_parties[0].address.on_one_line(bare=True) }
    show if: knows_resp_address
  - Edit: other_parties[0].emp_status
    button: |
      **Is ${other_parties[0].name.full(middle="full")} employed?**

      % if other_parties[0].emp_status['Yes']:
      * Yes
      % endif
      % if other_parties[0].emp_status['No']:
      * No
      % endif
      % if other_parties[0].emp_status['ss']:
      * They receive Social Security, unemployment or other types of benefits.
      % endif
      % if other_parties[0].emp_status['idk']:
      * I don't know.
      % endif
  - Edit: other_parties[0].employers[0].job_title
    button: |
     **${other_parties[0].name.full(middle="full")}'s job title:**
      ${ other_parties[0].employers[0].job_title }
    show if: other_parties[0].emp_status["Yes"]
  - Edit: other_parties[0].employers[0].name.text
    button: |
      **${other_parties[0].name.full(middle="full")}'s employer name:**
      ${ other_parties[0].employers[0].name.text }
    show if: other_parties[0].emp_status["Yes"]
  - Edit: other_parties[0].employers[0].address.address
    button: |
      **${other_parties[0].name.full(middle="full")}'s employer address:**
      ${ other_parties[0].employers[0].address.on_one_line(bare=True) }
    show if: other_parties[0].emp_status["Yes"]
  - Edit: other_parties[0].employers[0].phone_number
    button: |
      **${other_parties[0].name.full(middle="full")}'s employer phone:**
      % if other_parties[0].employers[0].phone_number != "":
      ${ phone_number_formatted(other_parties[0].employers[0].phone_number) }
      % else:
      None entered
      % endif
    show if: other_parties[0].emp_status["Yes"]
  - Edit: other_parties[0].has_second_job
    button: |
      **Does ${other_parties[0].name.full(middle="full")} have a second job?**
      ${word(yesno(other_parties[0].has_second_job))}
    show if: other_parties[0].emp_status["Yes"] == True
  - Edit: other_parties[0].employers[1].job_title
    button: |
     **${other_parties[0].name.full(middle="full")}'s second job title:**
      ${ other_parties[0].employers[1].job_title }
    show if: other_parties[0].emp_status["Yes"] == True and other_parties[0].has_second_job
  - Edit: other_parties[0].employers[1].name.text
    button: |
      **${other_parties[0].name.full(middle="full")}'s second employer name:**
      ${ other_parties[0].employers[1].name.text }
    show if: other_parties[0].emp_status["Yes"] == True and other_parties[0].has_second_job
  - Edit: other_parties[0].employers[1].address.address
    button: |
      **Second employer address:**
      ${ other_parties[0].employers[1].address.on_one_line(bare=True) }
    show if: other_parties[0].emp_status["Yes"] == True and other_parties[0].has_second_job
  - Edit: other_parties[0].employers[1].phone_number
    button: |
      **${other_parties[0].name.full(middle="full")}'s second employer phone:**
      % if other_parties[0].employers[1].phone_number != "":
      ${ phone_number_formatted(other_parties[0].employers[1].phone_number) }
      % else:
      None entered
      % endif
    show if: other_parties[0].emp_status["Yes"] == True and other_parties[0].has_second_job
  - Edit: other_parties[0].is_active_duty
    button: |
      **Is ${other_parties[0].name.full(middle="full")} currently on active duty?**
      % if other_parties[0].is_active_duty == 'Yes':
      Yes
      % elif other_parties[0].is_active_duty == 'No':
      No
      % else:
      I don't know.
      % endif
      
  - note: |
      <h4>Children (optional)</h4>
  - Edit: pet_is_pregnant
    button: |
      **Are you pregnant?**
      ${ word(yesno(pet_is_pregnant)) }      
  - Edit: pet_pregnant_resp_parent
    button: |
      **Is ${other_parties[0].name.full(middle="full")} the other parent of the unborn child?**
      ${ pet_pregnant_resp_parent }
    show if: pet_is_pregnant
  - Edit: resp_is_pregnant
    button: |
      **Is ${other_parties[0].name.full(middle="full")} pregnant?**
      ${ resp_is_pregnant }
  - Edit: resp_pregnant_pet_parent
    button: |
      **Are you the other parent of the unborn child?**
      ${ resp_pregnant_pet_parent }
    show if: resp_is_pregnant == "Yes"
  - Edit: any_children_together
    button: |
      **Do you and ${other_parties[0].name.full(middle="full")} have any children together?**
      ${ word(yesno(any_children_together)) }      
  - Edit: children_status
    button: |
      **You and your spouse have children who are:**

      % if children_status['minors']:
      * Younger than 18.
      % endif
      % if children_status['support']:
      * 18 or older but are still in school or have a disability.
      % endif
      % if children_status['adults']:
      * Adults who do not need support to attend school or because of a disability.
      % endif
  - Edit: children.revisit
    button: |
      **Your children with ${other_parties[0].name.full(middle="full")}: (Edit to change names and details)**

      % for my_var in children:
        * ${ my_var.name.full(middle="full") }
      % endfor
    show if: children_status['minors'] or children_status['support']
  - Edit: adult_children.revisit
    button: |
      **Your adult children with ${other_parties[0].name.full(middle="full")}: (Edit to change names and details)**

      % for my_var in adult_children:
        * ${ my_var.name.full(middle="full") }
      % endfor
    show if: children_status['adults'] and children_status['minors'] == False and children_status['support'] == False
  - Edit: has_other_kids_during_marriage
    button: |
      **Did you or ${other_parties[0].name.full(middle="full")} have a child by birth or adoption with someone else since the date of marriage?**
      ${ word(yesno(has_other_kids_during_marriage)) }
    show if: children_status['minors'] or children_status['support']
  - Edit: outside_children.revisit
    button: |
      **Children born or adopted outside the marriage: (Edit to change names and details)**

      % for my_var in outside_children:
        * ${ my_var.name.full(middle="full") }
      % endfor
    show if: has_other_kids_during_marriage and (children_status['minors'] or children_status['support'])
  - Edit: other_custody_case
    button: |
      **Have you been involved in another court case about custody or visitation with any of the children you have with ${other_parties[0].name.full(middle="full")}?**
      ${ word(yesno(other_custody_case)) }
    show if: children_status['minors'] or children_status['support']
  - Edit: custody_cases.revisit
    button: |
      **Other custody or visitation cases involving your children: (Edit to change details)**

      % for my_var in custody_cases:
      * Case number: ${my_var.name.text} in ${my_var.county}, ${my_var.state}
      % endfor
    show if: other_custody_case and (children_status['minors'] or children_status['support'])

  - Edit: other_case_involving_kids
    button: |
      **Do you know of another court case, not custody or visitation, that might affect any of the children you have with ${other_parties[0].name.full(middle="full")}?**
      ${ word(yesno(other_case_involving_kids)) }
    show if: children_status['minors'] or children_status['support']

      
  - Edit: other_custodian
    button: |
      **Do you know of another person who has custody or rights to any of the children you have with ${other_parties[0].name.full(middle="full")}?**
      ${ word(yesno(other_custodian)) }
    show if: children_status['minors'] or children_status['support']


      
  - Edit: kids_lived_with_other_adult
    button: |
      **Have any of your children with ${other_parties[0].name.full(middle="full")} lived with another adult without either parent in the last 5 years?**
      ${ word(yesno(kids_lived_with_other_adult)) }
    show if: children_status['minors'] or children_status['support']
      

      

  
  - note: |
      <h4>Filing details</h4>
  - Edit: case_county
    button: |
      **County where you will file your case:**
      ${ case_county }
  - Edit: e_signature
    button: |
      **Do you want to add your e-signature to your forms?**
      ${ word(yesno(e_signature)) }

---
id: children revisit
continue button field: children.revisit
question: |
  Edit the children you have with ${other_parties[0].name.full(middle="full")}
subquestion: |
  ${ children.table }

  % if children.number_gathered() < 7:
  ${ children.add_action() }
  % endif

---
table: children.table
rows: children
columns:
  - Name: |
      row_item.name.full(middle="full") if defined("row_item.name.first") else ""
  - Details (including birth date, school status, and residence history): |
      action_button_html(url_action(row_item.attr_name("review_child_details")), label="Edit", icon="pencil-alt")
delete buttons: True
confirm: True

---
id: child details
continue button field: x.review_child_details
generic object: ALIndividual
question: |
  Edit ${ x.name.full(middle="full") }'s information
review: 
  - Edit: x.name.first
    button: |
      **Name:**
      ${ x.name.full(middle="full")  }
  - Edit: x.birthdate
    button: |
      **Birth date:**
      ${ x.birthdate } 
  - Edit: x.is_of_marriage
    button: |
      **Was born or adopted after the marriage:**
      ${ word(yesno(x.is_of_marriage)) }
  - Edit: x.has_a_disability
    button: |
      **Has a disability:**
      ${ word(yesno(x.has_a_disability)) }
  - Edit: x.is_in_school
    button: |
      **Is currently in school:**
      ${ word(yesno(x.is_in_school)) }
  - Edit: x.is_resident
    button: |
      **Has ${ x.name.full(middle="full") } lived in Illinois for the last 6 months or more?**
      % if x.is_resident == 'Yes':
      Yes
      % elif x.is_resident == 'No':
      No
      % else:
      I don't know.
      % endif
  - Edit: x.address.address
    button: |
      **Current address:**
      ${ x.address.on_one_line(bare=True) }      
  - Edit: x.has_former_address
    button: |
      **Has ${x.name.full(middle="full")} lived at any other addresses in the last five years?**
      ${ word(yesno(x.has_former_address)) }
  - Edit: x.former_addresses.revisit
    button: |
      **Former addresses: (Edit to change details)**

      % for former_address in x.former_addresses:
        * ${ former_address.on_one_line(bare=True) }
      % endfor
    show if: x.has_former_address


continue button label: Next
---
id: former addresses revisit
continue button field: children[i].former_addresses.revisit
question: |
  Edit ${children[i].name.full(middle="full")}'s former addresses
subquestion: |
  ${ children[i].former_addresses.table }

  % if children[i].former_addresses.number_gathered() < 4:
  ${ children[i].former_addresses.add_action() }
  % endif
---
table: children[i].former_addresses.table
rows: children[i].former_addresses
columns:
  - Former address: |
      row_item.on_one_line(bare=True) if defined("row_item.address") else ""
  - Edit: |
      action_button_html(url_action(row_item.attr_name("address")), label="Edit", icon="pencil-alt")
delete buttons: True
confirm: True


---
id: adult children revisit
continue button field: adult_children.revisit
question: |
  Edit the adult children you have with ${other_parties[0].name.full(middle="full")}
subquestion: |
  ${ adult_children.table }

  ${ adult_children.add_action() }
---
table: adult_children.table
rows: adult_children
columns:
  - Name: |
      row_item.name.full(middle="full") if defined("row_item.name.first") else ""
  - Details (including name and birth date): |
      action_button_html(url_action(row_item.attr_name("review_adult_child_details")), label="Edit", icon="pencil-alt")
delete buttons: True
confirm: True

---
id: adult child details
continue button field: x.review_adult_child_details
generic object: ALIndividual
question: |
  Edit ${ x.name.full(middle="full") }'s information
review: 
  - Edit: x.name.first
    button: |
      **Name:**
      ${ x.name.full(middle="full")  }
  - Edit: x.birthdate
    button: |
      **Birth date:**
      ${ x.birthdate } 
continue button label: Next

---
id: outside children revisit
continue button field: outside_children.revisit
question: |
  Edit the children you or ${other_parties[0].name.full(middle="full")} had outside the marriage
subquestion: |
  ${ outside_children.table }

  % if outside_children.number_gathered() < 4:
  ${ outside_children.add_action() }
  % endif
---
table: outside_children.table
rows: outside_children
columns:
  - Name: |
      row_item.name.full(middle="full") if defined("row_item.name.first") else ""
  - Who's child: |
      row_item.parent if defined("row_item.parent") else ""
  - Edit: |
      action_button_html(url_action(row_item.attr_name("parent")), label="Edit", icon="pencil-alt")
delete buttons: True
confirm: True

---
id: custody cases revisit
continue button field: custody_cases.revisit
question: |
  Edit the other custody or visitation cases involving your children
subquestion: |
  ${ custody_cases.table }

  % if custody_cases.number_gathered() < 3:
  ${ custody_cases.add_action() }
  % endif
---
table: custody_cases.table
rows: custody_cases
columns:
  - Case number: |
      row_item.name.text if defined("row_item.name.text") else ""
  - County: |
      row_item.county if defined("row_item.county") else ""
  - State: |
      row_item.state if defined("row_item.state") else ""
  - Edit: |
      action_button_html(url_action(row_item.attr_name("name.text")), label="Edit", icon="pencil-alt")
delete buttons: True
confirm: True
