metadata:
  title: Divorce
  short title: Divorce
  comment: This program helps you make the forms to end a marriage or civil union.
  authors:
    - Matt Newsted
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ILAO:ilao-interview-framework.yml
  - docassemble.ILAO:shared-basic-questions.yml
---
objects:
  - users: ALPeopleList.using(there_are_any=True)
  - other_parties: ALPeopleList.using(there_are_any=True)
  - other_parties[i].employer: ALIndividual
  - other_parties[i].other_employer: ALIndividual
  - children: ALPeopleList.using(object_type=ALIndividual, there_are_any=True, complete_attribute='complete')
  - court_list: ALCourtLoader.using(file_name='docassemble.ILAO:data/sources/il_courts.xlsx')
---
code: |
  al_form_type = 'starts_case'
  ilao_easy_form_title = "Divorce"
  ilao_easy_form_url = "https://www.illinoislegalaid.org/legal-information/divorce"
  form_name = "Divorce"
  github_user = 'IllinoisLegalAidOnline'
  github_repo_name = 'docassemble-Divorce'
  allowed_courts = ['Circuit']
---
# Road map
sections:
  - section_intro: Start
  - section_basic: Basic info
  - section_about_you: About you
  - section_about_spouse: About your spouse
  - section_children: Children (optional)
  - section_debts: Debts
  - section_property: Property
  - section_filing: Filing details
  - section_download: Download  
---
# interview order block
mandatory: True
code: |
  nav.set_section('section_intro')
  sees_nav_bar
  snapshot_start
  how_to_use
  set_progress(5)
  accept_terms
  if users[0].is_resident:
    if users[0].meets_90_day_requirement == False:
      must_meet_90_day_requirement
  else:
    must_live_in_illinois
  case_county

  set_progress(10)  
  nav.set_section('section_basic')
  users[0].name.first
  other_parties[0].name.first
  marriage_date
  marriage_in_america
  previous_divorce
  if divorce_grounds != True:
    must_have_irreconcilable_differences
  
  set_progress(20)
  nav.set_section('section_about_you')
  hide_address
  users[0].address.address
  users[0].residence_county
  users[0].phone_number
  users[0].birthdate
  users[0].emp_status
  users[0].use_former_name
  
  set_progress(30)
  nav.set_section('section_about_spouse')
  other_parties[0].birthdate
  
  set_progress(40)
  nav.set_section('section_children')

  set_progress(60)
  nav.set_section('section_debts')

  set_progress(70)
  nav.set_section('section_property')
  
  set_progress(90)
  nav.set_section('section_filing')
  e_signature

  set_progress(100)
  nav.set_section('section_download')
  forms_assembling
  snapshot_forms
  get_docs_screen
---
code: |
  stuff_to_snapshot = {
  	'start_time': str(current_datetime().format_datetime()),
  	'started_interview': True, 
  	}

  try:
    stuff_to_snapshot['ip_address'] = device(ip=True)
  except:
    pass

  stuff_to_snapshot['zip'] = showifdef('users[0].address.zip')

  stuff_to_snapshot['with_kids'] = showifdef('file_with_kids')
  
  stuff_to_snapshot['downloaded_forms'] = showifdef('forms_assembling')
  
  store_variables_snapshot(
  	data=stuff_to_snapshot, persistent=True
  	)
  snapshot_interview_state = True
---
code: |
  snapshot_interview_state
  snapshot_start = True  
---
code: |
  reconsider('snapshot_interview_state')
  snapshot_forms = True
---
id: welcome
question: |
  Divorce
subquestion: |
  Welcome to Illinois Legal Aid Online's **Divorce** Easy Form.

  UPDATE THIS This program helps you ask the court for permission to use an unlicensed process server in your case. It will make a *Motion to Approve Process Server Who is Not Licensed*.

  When you start a lawsuit, the complaint or petition, and a **{summons}**, must be properly delivered to whoever you are suing. To learn more, read ILAO's article about [**serving a summons**](https://www.illinoislegalaid.org/node/147221).
field: sees_nav_bar
---
id: instructions
continue button field: how_to_use
question: |
  Instructions
subquestion: |
  UPDATE THIS To use this program you will need to know: 

  * Your court case information, 
  * Name and address of the person you want to be a process server,
  * Why you want to use an unlicensed process server,
  * Names and addresses of the other parties, and 
  * Names and addresses of the other parties’ lawyers, if any. 

  You can find most of this information on other court papers you have about this case. 

  Set aside 10 to 15 minutes to finish this program. You can log in and save your work to continue later. 
 
  ${ collapse_template(help_example) }  

  Click on **{green words}** to learn what they mean. Some questions have a question mark in a circle ${ fa_icon("question-circle", color_css="#0dcaf0" ) } that also gives help.
---
template: help_example
subject: |
  **You can expand sections like this to show more information.**
content: |  
  This is an example of help. Click again to hide.
---
id: live in IL
question: |
  Do you live in Illinois?
fields:
  - no label: users[0].is_resident
    datatype: yesnoradio  
---
id: must live in IL
event: must_live_in_illinois
question: |
  Sorry
subquestion: |
  You must live in Illinois if you want to file for divorce in Illinois.
  
  You can use the [**Legal Services Corporation website**](https://www.lsc.gov/about-lsc/what-legal-aid/get-legal-help) to find a legal aid organization in another state.
buttons:
  - Exit: exit
  - Restart: restart
---
id: live in IL for 90 days
question: |
  Have you lived in Illinois for longer than 90 days?
#subquestion: |
#  Answering **Yes** means that you lived in Illinois without taking a break to live in another state.
fields:
  - no label: users[0].meets_90_day_requirement
    datatype: yesnoradio
---
id: must meet 90 day requirement
event: must_meet_90_day_requirement
question: |
  Sorry
subquestion: |
  You must live in Illinois for longer than 90 days if you want to file for divorce in Illinois.
  
  You can use the [**Legal Services Corporation website**](https://www.lsc.gov/about-lsc/what-legal-aid/get-legal-help) to find a legal aid organization in another state.
buttons:
  - Exit: exit
  - Restart: restart
---
id: case county
question: |
  Where do you want to file your divorce?
subquestion: |
  **Note:** You must file the divorce in the county where you or your spouse lives.

  ${ collapse_template(county_lookup_help) }
fields:
  - County: case_county
    code:
      court_list._load_courts()["address_county"].unique()

---
id: user name
sets:
    - users[0].name.first
    - users[0].name.last
    - users[0].name.middle
    - users[0].name.suffix
question:  |
  What is your name?
fields:
  - code: |
      users[0].name_fields()
---
sets:
  - other_parties[0].name.first
  - other_parties[0].name.last
  - other_parties[0].name.middle
  - other_parties[0].name.suffix
id: spouse name
question: |
  What is the name of your spouse?
subquestion: |
  The word "spouse" refers to your husband, wife, or domestic partner.
fields:
  - code: |
      other_parties[0].name_fields()
---
id: marriage date
question: |
  When were you married?
subquestion: |
  If you are ending a civil union, enter the date you were united.
fields:
  - Date of marriage or civil union: marriage_date
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: marriage location
question: |
  Where were you married?
subquestion: |
  If you are ending a civil union, enter the location where the civil union occurred.
fields:
  - Were you married or united in the United States?: marriage_in_america
    datatype: yesnoradio
  - County: marriage_county
    show if: 
      variable: marriage_in_america
      is: True
  - State: marriage_state
    show if: 
      variable: marriage_in_america
      is: True
    code: |
      states_list() 
  - County and State or Province (separated by a comma): marriage_intl_text
    help: |
      List the county and list the state or province if the country has them.
    required: False
    show if: 
      variable: marriage_in_america
      is: False
  - Country (outside US): marriage_country
    show if: 
      variable: marriage_in_america
      is: False   
---
id: previous divorce filed
question: |
  Have you or your spouse filed an earlier case to dissolve this marriage or civil union?
fields:
  - Filed an earlier divorce?: previous_divorce
    datatype: radio
    choices:
      - Yes: Yes
      - No: No
      - I don't know.: I don't know.
  - Was it filed in the United States?: previous_divorce_in_us
    datatype: yesnoradio
    show if: 
      variable: previous_divorce
      is: "Yes"
  - County: previous_divorce_county
    show if: 
      variable: previous_divorce_in_us
      is: True
  - State: previous_divorce_state
    show if: 
      variable: previous_divorce_in_us
      is: True
    code: |
      states_list() 
  - Country (outside US): previous_divorce_country
    show if: 
      variable: previous_divorce_in_us
      is: False   
---
id: divorce grounds
question: |
  Have irreconcilable differences caused the irretrievalble breakdown of the marriage or civil union?
subquestion: |
  Select **Yes** if:
  
  * You and your spouse have tried to fix the problems in your marriage or civil union, but could not, or
  * The problems are so bad that trying to fix them is not best for your family.
fields:
  - no label: divorce_grounds
    datatype: yesnoradio  
---
id: must be irreconcilable differences
event: must_have_irreconcilable_differences
question: |
  Sorry
subquestion: |
  To use this program, you and your spouse or partner must have irreconcilable differences that led to the irretrievable breakdown of the marriage or civil union.

  This means that you and your spouse have tried to fix the problems in your marriage or civil union, but could not. Or it could be that the problems are so bad that trying to fix them is not best for your family.
  
   Click **Back** if you made a mistake. Or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart  


---
id: hide address
question: |
  Do you want to keep your address hidden?
subquestion: |
  You do not need to list where you are staying on your court papers. You can use an address where you can receive court notices instead.
field: hide_address
choices:
  - Yes: True
  - No: False
---
id: get address
question: |
  % if hide_address:
  What is your mailing address?
  % else:
  What is your home address?
  % endif
subquestion: |
  % if hide_address:
  **This address will appear on your court papers.** You may receive court notices and documents about your case at this address.
  % else:
  **This address will appear on your court papers.** If you do not want this, click **Back** to keep your address hidden.
  % endif
fields:
  - Street address: users[0].address.address
    address autocomplete: True
  - Address line 2: users[0].address.unit
    required: False
  - City: users[0].address.city
  - State: users[0].address.state
    code: |
      states_list()
    default: IL      
  - ZIP code: users[0].address.zip
---
id: user residence county
question: |
  In which county do you live?
subquestion: |
  **Reminder:** You must file the divorce in the county where you or your spouse lives.

  ${ collapse_template(county_lookup_help) }
fields:
  - County: users[0].residence_county
    code:
      court_list._load_courts()["address_county"].unique()

---
id: your contact information
question: |
  What is your contact information?
subquestion: |
  The court or other parties might need to contact you about this case.

  **This information will appear on your court forms.**
  
  If you do not want to list a phone number on your forms, leave it blank.

  If you have an email address, you must list it. Be sure to check your email daily, otherwise you may miss important court documents or information about your case.

  ${ collapse_template(contact_info_help) }  
fields:  
  - Phone number: users[0].phone_number
    datatype: al_international_phone
    required: False
  - label: |
      Do you have an email address?
    field: users[0].has_email_address      
    datatype: yesnoradio
  - note: |
      This email address will appear on your court forms. Be sure to check 
      this email daily, otherwise you may miss important information about 
      your case.
    show if:
      variable: users[0].has_email_address
      is: True
  - Email address: users[0].email    
    datatype: email
    show if: 
      variable: users[0].has_email_address
      is: True
---
template: contact_info_help
subject: |
  **What if I don't want to list my email address?**
content: |  
  If you do not want to enter your personal email address, you can create a new email account to get email about your case.
  
  To make a new email account try one of these email services:
  
  * [**Gmail**](https://accounts.google.com/SignUp)
  * [**Outlook**](https://outlook.live.com/owa/?nlp=1&signup=1)
  * [**Yahoo**](https://login.yahoo.com/account/create?.lang=en-US&.intl=us)
---
id: birthdate
question: |
  When were you born?
fields:
  - Date of birth: users[0].birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: employment status
question: |
  Are you currently employed?
subquestion: |
  Check all that apply.
fields:
  - no label: users[0].emp_status
    datatype: checkboxes
    choices:
      - Yes: Yes
      - No: No
      - I receive Social Security, unemployment or other types of benefits.: ss
    none of the above: False
validation code: |
  if users[0].emp_status['Yes'] and users[0].emp_status['No']:
    validation_error("You cannot select both 'Yes' and 'No.' Please adjust your answers.", field="users[0].emp_status")
---



---
sets:
  - users[0].aliases[0].first
  - users[0].aliases[0].last
  - users[0].aliases[0].middle
  - users[0].aliases[0].suffix
id: user former name
question: |
  Do you want to go back to a former or maiden name?
fields:
  - no label: users[0].use_former_name
    datatype: yesnoradio
  - note: |
      Enter your former or maiden name.
    show if:
      variable: users[0].use_former_name
      is: True
  - First name: users[0].aliases[0].first
    show if:
      variable: users[0].use_former_name
      is: True
  - Middle name: users[0].aliases[0].middle
    required: False
    show if:
      variable: users[0].use_former_name
      is: True
  - Last name: users[0].aliases[0].last
    show if:
      variable: users[0].use_former_name
      is: True
  - Suffix: users[0].aliases[0].suffix
    code: |
      name_suffix()
    required: False
    show if:
      variable: users[0].use_former_name
      is: True
---
id: spouse birthdate
question: |
  When was ${other_parties[0].name.full(middle="full")} born?
fields:
  - Date of birth: other_parties[0].birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---





---
id: e-signature
question: |
  Do you want to add your e-signature to your ${ form_name }?
subquestion: |
  This program can put “**/s/ ${users[0].name.full(middle='full')}**” where you would sign your name. The court will accept this as your signature.

  If you do not add your **{e-signature}** now, you must sign your paper forms before you file and deliver them.

  <div class="alert alert-info ilao-info" role="alert">
    <h6 class="alert-heading">What it means to sign your forms</h6>
    <p>By signing your <i>Motion to Approve Process Server Who is Not Licensed</i>, you are certifying that:</p>
    <p><ul>
      <li>Everything on the forms is true and correct, and</li>
      <li>You understand that making a false statement on the form is perjury, which can result in criminal penalties.</li>
    </ul></p>
  <p>See the <a href="https://www.ilga.gov/legislation/ilcs/documents/073500050k1-109.htm"><b>Code of Civil Procedure, 735 ILCS 5/1-109</b></a> for more information.</p>
    <p>By signing your <i>Notice of Court Date for Motion</i> (if needed), you are certifying that:</p>
    <p><ul>
      <li>You read the document,</li>
      <li>You believe it to be true and correct, and</li>
      <li>You are not filing it for an improper purpose.</li>
    </ul></p>
    <p>See the <a href="https://ilcourtsaudio.blob.core.windows.net/antilles-resources/resources/9ce1fce9-895f-463e-b87d-f9b7631f8fde/Rule%20137.pdf"><b>Illinois Supreme Court Rule 137</b></a> for more information.</p>
  </div>
fields:
  - "Add e-signature?": e_signature
    datatype: yesnoradio
terms:
  - "e-signature": |
      An e-signature is an electronic signature. It is a digital version of a signature that has the same effect as a hand-written signature. 
---
code: |
  file_with_kids = True
---
id: forms assembling
continue button field: forms_assembling
question: |
  Almost done
subquestion: |
  After you click **Next**, it may take a few moments to finish making your forms.
  
  ###### You do not need to refresh your screen. Hang in there!
  
  [NEWLINE]
---
id: get docs screen
event: get_docs_screen
question: |
  Download
subquestion: |
  
  Your forms are ready. View and download your forms below. Click **Make changes** to fix any mistakes.
 
  This program **does not file** your divorce forms. You will need to do this yourself. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).

  ${ action_button_html(url_action('review_answers'), label=':edit: Make changes', color='success', size="md") }
  
  ${ al_user_bundle.download_list_html() }

  [NEWLINE]

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

  **Note:** This program **does not file** your forms. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).
  
  Thank you for using ILAO Easy Forms!
under: |
  % if not user_logged_in():
  [${fa_icon("sign-in-alt", color="#0079d0", size="sm")} **Sign-in**](${url_of('login', next=interview_url())}) or [**create**](${url_of('register', next=interview_url())}) an ILAO Easy Form account to save your progress (optional).
  % endif 

  &nbsp;
  ${ action_button_html(interview_url(i="docassemble.ILAO:feedback.yml", easy_form_interview=ilao_easy_form_url, easy_form_title=ilao_easy_form_title, easy_form_page=current_context().question_id, easy_form_variable=current_context().variable, local=False,reset=1), label=':comment: Was this program helpful?', color="#181c36", size="md", new_window=True) }
---
generic object: ALDocumentBundle
template: x.get_email_copy
content: |
  Send a copy of your forms to your email
---
generic object: ALDocumentBundle
template: x.send_email_template
subject: |
  Divorce forms
content: |
  Your forms are attached.
  
  Thanks for using ILAO Easy Forms!
  
  [Illinois Legal Aid Online](https://www.illinoislegalaid.org)

---
objects:
  - instructions_kids: ALDocument.using(title="Instructions", filename="instructions_kids.pdf", has_addendum=False)
---
code: |
  instructions_kids.enabled = True
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[instructions_kids], filename="divorce_forms.pdf", title="All forms")
  - al_court_bundle: ALDocumentBundle.using(elements=[instructions_kids], filename="divorce_forms.pdf", title="All forms")
---
attachment:
  variable name: instructions_kids[i]
  name: instructions_kids
  filename: instructions-kids
  editable: False
  skip undefined: True
  pdf template file: instructions_kids.pdf  
  fields:
      - "fake": ${ "" }
---
############### Review page
id: review screen
event: review_answers
question: |
  Review screen
subquestion: |
  Edit your answers below.
review: 
  - note: |
      <h4>Basic info</h4>
  - Edit:
    - marriage_date
    button: |
      **Marriage or civil union date:**
      ${ marriage_date }
  - Edit:
    - marriage_in_america
    button: |
      **Place of marriage or civil union:**
      % if marriage_in_america:
      ${ marriage_county }, ${ marriage_state }, US
      % else:
      % if marriage_intl_text != "":
      ${ marriage_intl_text}, ${marriage_country}
      % else:
      ${marriage_country} 
      % endif      
      % endif
  - Edit:
    - previous_divorce
    button: |
      **Did you or your spouse file an earlier case to dissolve the marriage or civil union?**
      ${ previous_divorce }
  - Edit:
    - previous_divorce
    button: |
      **Case filed in:**
      % if previous_divorce_in_us:
      ${ previous_divorce_county }, ${ previous_divorce_state }
      % else:
      ${previous_divorce_country}
      % endif      
    show if: previous_divorce == "Yes"
  - Edit:
    - divorce_grounds
    button: |
      **Reason to end marriage or civil union:**
      Irreconcilable differences

  
  - note: |
      <h4>About you</h4>
  - Edit: users[0].name.first
    button: |
      **Your name:**
      ${users[0].name.full(middle="full")}
  - Edit: hide_address
    button: |
      **Do you want to keep your address hidden?**
      ${ word(yesno(hide_address)) }
  - Edit: users[0].address.address
    button: |
      % if hide_address:
      **Your mailing address (will appear on your court papers):**
      % else:
      **Your home address:**
      % endif    
      ${ users[0].address.on_one_line(bare=True) }
  - Edit: users[0].residence_county
    button: |
      **County where you live:**
      ${ users[0].residence_county }
  - Edit: users[0].phone_number
    button: |
      **Your phone number:**
      ${ phone_number_formatted(users[0].phone_number) }
  - Edit: users[0].has_email_address
    button: |
      **Do you have an email address?**
      ${ word(yesno(users[0].has_email_address)) }
  - Edit: users[0].email
    button: |
      **Your email:**
      ${ users[0].email }
    show if: users[0].has_email_address
  - Edit: users[0].birthdate
    button: |
      **When were you born?**
      ${ users[0].birthdate }
  - Edit: users[0].emp_status
    button: |
      **Are you employed?**

      % if users[0].emp_status['Yes']:
      * Yes
      % endif
      % if users[0].emp_status['No']:
      * No
      % endif
      % if users[0].emp_status['ss']:
      * I receive Social Security, unemployment or other types of benefits.
      % endif

      
  - Edit: users[0].use_former_name
    button: |
      **Do you want to go back to a former or maiden name?**
      ${word(yesno(users[0].use_former_name))}
  - Edit: users[0].use_former_name
    button: |
      **Former or maiden name:**
      ${ users[0].aliases[0].full(middle="full")}
    show if: users[0].use_former_name
      
  - note: |
      <h4>About your spouse</h4>
  - Edit: other_parties[0].name.first
    button: |
      **Your spouse's name:**
      ${other_parties[0].name.full(middle="full")}
  - Edit: other_parties[0].birthdate
    button: |
      **When was your spouse born?**
      ${ other_parties[0].birthdate }

      
      
  - note: |
      <h4>Filing details</h4>
  - Edit: case_county
    button: |
      **County where you will file your case:**
      ${ case_county }
  - Edit: e_signature
    button: |
      **Do you want to add your e-signature to your forms?**
      ${ word(yesno(e_signature)) }